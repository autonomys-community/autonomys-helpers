(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{600:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>p});var a=s(7876),t=s(4232),o=s(6677),l=s(836),c=s(4420),r=s(5019);async function i(e,n){try{console.log("Connecting to:",e);let s=new c.E(e),a=await r.G.create({provider:s});await a.isReady,console.log("Connected to Subspace RPC.");let t=await a.query.messenger.channels.entries(n);console.log("Raw entries fetched (".concat(t.length,"):"),t),t.forEach((e,n)=>{let[s,a]=e;console.log("Decoded channel ".concat(n,":"),a.toHuman())});let o=t.map(e=>{let[n,s]=e;return s.toHuman()}).filter(e=>"object"==typeof e&&null!==e&&"channelId"in e);return console.log("Valid channels decoded: ".concat(o.length)),await a.disconnect(),console.log("Disconnected from RPC."),o}catch(e){return console.error("Error during fetchChannels:",e),[]}}var d=s(8005);let h=e=>{let{channel:n,parseNumber:s}=e,{channelId:t,state:o,nextInboxNonce:l,nextOutboxNonce:c,latestResponseReceivedMessageNonce:r,maxOutgoingMessages:i}=n,h=s(l),m=s(c),u=s(r),g=s(i),x=Math.max(0,m-1-u),j=Math.max(0,h-1),p=Math.max(0,u),v=g>0?Math.min(x/g*100,100):0;return(0,a.jsxs)("div",{className:"border rounded p-3 mb-4 shadow-sm bg-light",children:[(0,a.jsxs)("h5",{children:["Channel #",t]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Status:"})," ",o]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Capacity:"})," ",g.toLocaleString()]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Inbound Messages Processed:"})," ",j.toLocaleString()]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Outbound Messages Processed:"})," ",p.toLocaleString()]}),(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Pending Outbound Messages:"})," ",x.toLocaleString()]}),(0,a.jsx)(d.A,{now:v,label:"".concat(v.toFixed(1),"%"),variant:"primary"})]})},m=e=>{let{channels:n,parseNumber:s}=e;return(0,a.jsx)("div",{children:n.map(e=>(0,a.jsx)(h,{channel:e,parseNumber:s},e.channelId))})};var u=s(7867);let g=e=>{let{totalChannels:n,totalCapacity:s,totalInbound:t,totalOutbound:o,totalPending:l}=e,c=s>0?Math.min(l/s*100,100):0;return(0,a.jsx)(u.A,{className:"mb-4",children:(0,a.jsxs)(u.A.Body,{children:[(0,a.jsx)(u.A.Title,{children:"Chain Summary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total Open Channels:"})," ",n.toLocaleString()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total Capacity:"})," ",s.toLocaleString()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total Inbound Messages Processed:"})," ",t.toLocaleString()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total Outbound Messages Processed:"})," ",o.toLocaleString()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total Pending Outbound Messages:"})," ",l.toLocaleString()]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("strong",{children:"Network Utilization:"}),(0,a.jsx)(d.A,{now:c,label:"".concat(c.toFixed(1),"%"),variant:c>90?"danger":c>80?"warning":"primary"})]})]})})},x={mainnet:{name:"Mainnet",consensus:"wss://rpc.mainnet.subspace.foundation/ws",autoEvm:"wss://auto-evm.mainnet.autonomys.xyz/ws"},chronos:{name:"Chronos Testnet",consensus:"wss://rpc.chronos.autonomys.xyz/ws",autoEvm:"wss://auto-evm.chronos.autonomys.xyz/ws"}};function j(e){return Math.max(0,parseInt((null==e?void 0:e.replace(/,/g,""))||"0",10))}function p(){let[e,n]=(0,t.useState)([]),[s,c]=(0,t.useState)(!0),[r,d]=(0,t.useState)("mainnet"),[h,u]=(0,t.useState)("consensus"),{endpoint:p,destinationChainId:v}=(0,t.useMemo)(()=>{let e=x[r];return{endpoint:"consensus"===h?e.consensus:e.autoEvm,destinationChainId:"consensus"===h?{Domain:0}:{Consensus:0}}},[r,h]);(0,t.useEffect)(()=>{c(!0),i(p,v).then(e=>{let s=e.filter(e=>"object"==typeof e&&null!==e&&"channelId"in e);console.log("Valid channels passed to state:",s),n(s),c(!1)}).catch(e=>{console.error("Fetching channels failed:",e),c(!1)})},[p,v]);let b=(0,t.useMemo)(()=>{let n=0,s=0,a=0,t=0;return e.forEach(e=>{let o=j(e.maxOutgoingMessages),l=j(e.nextInboxNonce),c=j(e.nextOutboxNonce),r=j(e.latestResponseReceivedMessageNonce);"Open"===e.state&&(n+=o),s+=Math.max(0,l-1),a+=Math.max(0,r),t+=Math.max(0,c-1-r)}),{totalChannels:e.filter(e=>"Open"===e.state).length,totalCapacity:n,totalInbound:s,totalOutbound:a,totalPending:t}},[e]);return(0,a.jsxs)("div",{className:"container py-5",children:[(0,a.jsx)("h1",{children:"XDM Channels Status"}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{className:"form-label fw-bold",children:"Select Network:"}),(0,a.jsxs)(o.A,{className:"w-100",children:[(0,a.jsx)(l.A,{id:"toggle-mainnet",type:"radio",variant:"mainnet"===r?"primary":"outline-primary",name:"networkToggle",value:"mainnet",checked:"mainnet"===r,onChange:()=>d("mainnet"),children:"Mainnet"}),(0,a.jsx)(l.A,{id:"toggle-chronos",type:"radio",variant:"chronos"===r?"primary":"outline-primary",name:"networkToggle",value:"chronos",checked:"chronos"===r,onChange:()=>d("chronos"),children:"Chronos Testnet"})]})]}),(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{className:"form-label fw-bold",children:"Select Chain:"}),(0,a.jsxs)(o.A,{className:"w-100",children:[(0,a.jsx)(l.A,{id:"toggle-consensus",type:"radio",variant:"consensus"===h?"primary":"outline-primary",name:"chainToggle",value:"consensus",checked:"consensus"===h,onChange:()=>u("consensus"),children:"Consensus Chain"}),(0,a.jsx)(l.A,{id:"toggle-autoevm",type:"radio",variant:"autoEvm"===h?"primary":"outline-primary",name:"chainToggle",value:"autoEvm",checked:"autoEvm"===h,onChange:()=>u("autoEvm"),children:"Auto EVM"})]})]})]})}),!s&&e.length>0&&(0,a.jsx)(g,{...b}),s?(0,a.jsx)("div",{children:"Loading channel data..."}):0===e.length?(0,a.jsx)("div",{children:"No channel data available."}):(0,a.jsx)(m,{channels:e,parseNumber:j})]})}},7132:(e,n,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/channels",function(){return s(600)}])},7790:()=>{}},e=>{e.O(0,[622,548,636,593,792],()=>e(e.s=7132)),_N_E=e.O()}]);