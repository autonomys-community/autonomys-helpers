(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{26:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>g});var a=s(7876),t=s(4232),o=s(6677),l=s(836),c=s(4420),r=s(5019);async function i(e,n){try{console.log("Connecting to:",e);let s=new c.E(e),a=await r.G.create({provider:s});await a.isReady,console.log("Connected to Subspace RPC.");let t=await a.query.messenger.channels.entries(n);console.log("Raw entries fetched (".concat(t.length,"):"),t),t.forEach((e,n)=>{let[s,a]=e;console.log("Decoded channel ".concat(n,":"),a.toHuman())});let o=t.map(e=>{let[n,s]=e;return s.toHuman()}).filter(e=>"object"==typeof e&&null!==e&&"channelId"in e);return console.log("Valid channels decoded: ".concat(o.length)),await a.disconnect(),console.log("Disconnected from RPC."),o}catch(e){return console.error("Error during fetchChannels:",e),[]}}var d=s(8005);let h=e=>{let{channel:n,parseNumber:s}=e,{channelId:t,state:o,nextInboxNonce:l,nextOutboxNonce:c,latestResponseReceivedMessageNonce:r,maxOutgoingMessages:i}=n,h=s(l),u=s(c),m=s(r),g=s(i),p=Math.max(0,u-1-m),x=Math.max(0,h-1),j=Math.max(0,u-1),b=g>0?Math.min(p/g*100,100):0;return(0,a.jsxs)("div",{className:"border rounded p-3 mb-4 shadow-sm bg-light",children:[(0,a.jsxs)("h5",{children:["Channel #",t]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Status:"})," ",o]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Capacity:"})," ",g.toLocaleString()]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Inbound Messages:"})," ",x.toLocaleString()]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Outbound Messages:"})," ",j.toLocaleString()]}),(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Pending Messages:"})," ",p.toLocaleString()]}),(0,a.jsx)(d.A,{now:b,label:"".concat(b.toFixed(1),"%"),variant:"primary"})]})},u=e=>{let{channels:n,parseNumber:s}=e;return(0,a.jsx)("div",{children:n.map(e=>(0,a.jsx)(h,{channel:e,parseNumber:s},e.channelId))})};function m(e){return Math.max(0,parseInt((null==e?void 0:e.replace(/,/g,""))||"0",10))}function g(){let[e,n]=(0,t.useState)([]),[s,c]=(0,t.useState)(!0),[r,d]=(0,t.useState)("consensus"),{endpoint:h,destinationChainId:g}=(0,t.useMemo)(()=>({endpoint:"consensus"===r?"wss://rpc-0.taurus.subspace.network/ws":"wss://auto-evm.taurus.autonomys.xyz/ws",destinationChainId:"consensus"===r?{Domain:0}:{Consensus:0}}),[r]);return(0,t.useEffect)(()=>{c(!0),i(h,g).then(e=>{let s=e.filter(e=>"object"==typeof e&&null!==e&&"channelId"in e);console.log("Valid channels passed to state:",s),n(s),c(!1)}).catch(e=>{console.error("Fetching channels failed:",e),c(!1)})},[h,g]),(0,a.jsxs)("div",{className:"container py-5",children:[(0,a.jsx)("h1",{children:"XDM Channels Status"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"form-label me-3 fw-bold",children:"Select Network:"}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(l.A,{id:"toggle-consensus",type:"radio",variant:"consensus"===r?"primary":"outline-primary",name:"networkToggle",value:"consensus",checked:"consensus"===r,onChange:()=>d("consensus"),children:"Consensus Chain"}),(0,a.jsx)(l.A,{id:"toggle-autoevm",type:"radio",variant:"autoEvm"===r?"primary":"outline-primary",name:"networkToggle",value:"autoEvm",checked:"autoEvm"===r,onChange:()=>d("autoEvm"),children:"Auto EVM"})]})]}),s?(0,a.jsx)("div",{children:"Loading channel data..."}):0===e.length?(0,a.jsx)("div",{children:"No channel data available."}):(0,a.jsx)(u,{channels:e,parseNumber:m})]})}},7132:(e,n,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/channels",function(){return s(26)}])},7790:()=>{}},e=>{var n=n=>e(e.s=n);e.O(0,[622,418,636,593,792],()=>n(7132)),_N_E=e.O()}]);